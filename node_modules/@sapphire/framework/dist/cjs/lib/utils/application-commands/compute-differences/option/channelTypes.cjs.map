{"version":3,"sources":["../../../../../../../src/lib/utils/application-commands/compute-differences/option/channelTypes.ts"],"names":["ChannelType","currentIndex"],"mappings":"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","file":"channelTypes.cjs","sourcesContent":["import { ChannelType, type APIApplicationCommandChannelOption } from 'discord-api-types/v10';\nimport type { CommandDifference } from '../_shared';\n\nconst channelTypeToPrettyName: Record<Exclude<APIApplicationCommandChannelOption['channel_types'], undefined>[number], string> = {\n\t[ChannelType.GuildText]: 'text channel (type 0)',\n\t[ChannelType.GuildVoice]: 'voice channel (type 2)',\n\t[ChannelType.GuildCategory]: 'guild category (type 4)',\n\t[ChannelType.GuildAnnouncement]: 'guild announcement channel (type 5)',\n\t[ChannelType.AnnouncementThread]: 'guild announcement thread (type 10)',\n\t[ChannelType.PublicThread]: 'guild public thread (type 11)',\n\t[ChannelType.PrivateThread]: 'guild private thread (type 12)',\n\t[ChannelType.GuildStageVoice]: 'guild stage voice channel (type 13)',\n\t[ChannelType.GuildForum]: 'guild forum (type 15)',\n\t[ChannelType.GuildMedia]: 'guild media channel (type 16)'\n};\n\nconst unknownChannelType = (type: number): string => `unknown channel type (${type}); please contact Sapphire developers about this!`;\n\nfunction getChannelTypePrettyName(type: keyof typeof channelTypeToPrettyName): string {\n\treturn channelTypeToPrettyName[type] ?? unknownChannelType(type);\n}\n\nexport function* checkChannelTypes({\n\texistingChannelTypes,\n\tnewChannelTypes,\n\tcurrentIndex,\n\tkeyPath\n}: {\n\tcurrentIndex: number;\n\tkeyPath: (index: number) => string;\n\texistingChannelTypes?: APIApplicationCommandChannelOption['channel_types'];\n\tnewChannelTypes?: APIApplicationCommandChannelOption['channel_types'];\n}): Generator<CommandDifference> {\n\t// 0. No existing channel types and now we have channel types\n\tif (!existingChannelTypes?.length && newChannelTypes?.length) {\n\t\tyield {\n\t\t\tkey: `${keyPath(currentIndex)}.channel_types`,\n\t\t\toriginal: 'no channel types present',\n\t\t\texpected: 'channel types present'\n\t\t};\n\t}\n\t// 1. Existing channel types and now we have no channel types\n\telse if (existingChannelTypes?.length && !newChannelTypes?.length) {\n\t\tyield {\n\t\t\tkey: `${keyPath(currentIndex)}.channel_types`,\n\t\t\toriginal: 'channel types present',\n\t\t\texpected: 'no channel types present'\n\t\t};\n\t}\n\t// 2. Iterate over each channel type if we have any and see what's different\n\telse if (newChannelTypes?.length) {\n\t\tlet index = 0;\n\t\tfor (const channelType of newChannelTypes) {\n\t\t\tconst currentIndex = index++;\n\t\t\tconst existingChannelType = existingChannelTypes![currentIndex];\n\t\t\tif (channelType !== existingChannelType) {\n\t\t\t\tyield {\n\t\t\t\t\tkey: `${keyPath(currentIndex)}.channel_types[${currentIndex}]`,\n\t\t\t\t\toriginal: existingChannelType === undefined ? 'no channel type present' : getChannelTypePrettyName(existingChannelType),\n\t\t\t\t\texpected: getChannelTypePrettyName(channelType)\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\t// If we went through less channel types than we previously had, report that\n\t\tif (index < existingChannelTypes!.length) {\n\t\t\tlet channelType: Exclude<APIApplicationCommandChannelOption['channel_types'], undefined>[number];\n\t\t\twhile ((channelType = existingChannelTypes![index]) !== undefined) {\n\t\t\t\tyield {\n\t\t\t\t\tkey: `${keyPath(index)}.channel_types[${index}]`,\n\t\t\t\t\texpected: 'no channel type present',\n\t\t\t\t\toriginal: getChannelTypePrettyName(channelType)\n\t\t\t\t};\n\n\t\t\t\tindex++;\n\t\t\t}\n\t\t}\n\t}\n}\n"]}